# 2016-11-12 NODE

### 学习github/git 的学习目标

- 知道　GIT是**版本控制**工具
- 每个同学要有一个github 仓库
- 已经添加ｓｈｈ　ｋｅｙ互信，也就是可以从本地仓库推送内容（ＧＩＴ　ＰＵＳＨ）到ｇｉｔｈｕｂ仓库
- 可以在本地仓库中任意添加，删除，修改文本，并制作成版本。



这样，ｇｉｔ　ｈｕｂ／ｇｉｔ初级使用我们就有能力完成了，但是，作为成熟开发者，ｇｉｔ　ｈｕｂ上面会发　ｐｕｓｈ　ｒｅｑｕｅｓｔ，本地ｇｉｔ会开启新分支，暂时我们先不涉及。



### 承前启后

课程到现在，程序员三大基本工具，我们就介绍完毕。

- 编辑器：atom  atom　　js
- 命令行：linux  驾驭命令行怪兽
- 版本控制：git/git hub　　GIT北京


学习上面三大工具，就是为了更加高效的写**代码**。


### NODE JS

在[NOTE JS]（http://nodejs.cn/）官网可以看到。
ＮＯＴＥ　ＪＳ是一个可以安装在本地机器上的javascript运行环境
其实，传统上javascript只能运行在浏览器里，也就是说javascript唯一的运行环境就是浏览器。但是note js出现后，就可以在本地机器上执行javascript了。这个特点带来了ＷＥＢ开发的革命。

来解释下，比如，我们有一个mian.js文件，里面写一个

```
console.log("hello world")
```

在几年前，要执行这个main.js唯一的办法就是把它放到浏览器执行。

但是，现在，我们本地安装好NOTE.JS之后，就可以这样来执行了。

```
在命令行中node main.js在本地执行文件
输出hello world
```

其实，NODE.JS 就是一个剥了皮的ｃｈｒｏｍｅ浏览器。

### Ｎｏｄｅ　ｊｓ　诞生的巨大意义。

一个ｗｅｂ项目都有前台代码和后台代码组成，前台代码都是用ＨＴＭＬ＋ＣＳＳ＋ＪＳ来写的，但是传统上由于本地机器不能运行ＪＳ，所以后台代码不能用ＪＳ来写的，于是我们还要学另外一种语言才能写ＷＥＢ程序，通常用来写Ｗｅｂ后台程序的语言有：ＰＨＰ、Ｊａｖａ、Ｃ＃、Ｐｙｔｈｏｎ、Ｒｕｂｙ、Ｇｏ　...

所以ｎｏｄｅ　ｊｓ　的意义就在于，现在开发者终于用学一种语言，就可以同时进行前台和后台的开发了。


### ＬＩＮＵＸ安装ＮＯＤＥ　ＪＳ

具体步骤可以参考
ＮＯＤＥ　ＪＳ乐高　第二小节。


### ＥＳ６介绍

底层的技术规范是ＥＳ５，ＥＳ５语法的ＪＳ特点就是**可以直接在浏览器里执行**。但是，当前成熟的工程师更多的是采用**ＥＳ６规范的ＪＳ**（简称ＥＳ６）。

ＥＳ６的特点，简单说：

- 语法更完善，例如不推荐使用ＶＡＲ，而是使用ｌｅｔ　ｃｏｎｓｔ来声明变量
- 功能更强大，引入了ｃｌａｓｓ关键字，从此ＪＳ有了面向对象的特点
- 语法更简单，这一点从ｃｌａｓｓ与ｐｒｏｔｏｔｙｐｅ的使用区别上可以看到。

以后会用ＥＳ６来写程序。

但是，ＥＳ６目前的一个问题就是：很多ＥＳ６的语法，浏览器还不支持。这个需要通过**预处理**来解决。所谓预处理，就是把ＥＳ６编译成ＥＳ５。这个编译器就Ｂａｂｅｌ。


### Babel简介

[ｂａｂｅｌ官网](https://babeljs.io/)

官网对ｂａｂｅｌ的描述是：一个ｊａｖａｓｃｒｉｐｔ的编辑器(compiler)。

babel编译过程，输入格式ＥＳ６，输出格式是ＥＳ５（ＥＳ５就是浏览器可以直接支持的ＪＳ版本）

到ｂａｂｅｌ官网，点击ｔｒｙ　ｉｔ　ｏｕｔ，可以进入ｂａｂｅｌ的在线测试用环境，左侧如果我们输入ＥＳ６语句，例如

```
let i=1;
```
那么右侧会自动生产ＥＳ５的代码。

```
var i = 1;
```

[参考书籍](http://es6.ruanyifeng.com/)

### Webpack + Babel 来编译 ES6

[nemwing文档](http://newming.coding.me/myidoc)

使用 Babel 的在线编译环境，实际项目中没有办法使用，因为比较麻烦。实际中，我们是试用命令行工具，来自动化的完成编辑工作的。具体涉及到工具就是 Webpack 和 Babel 。

ｗｅｂｐａｃｋ是一个ｂｕｎｄｌｅｒ（把多个ｊｓ模块打包成一个文件），但是同时ｗｅｂｐａｃｋ也是目前最常用的一个**预处理**工具，可以配合多个工具（或者理解为插件）来使用，而Ｂａｂｅｌ只是其中一种。

当代职业开发者，手写的代码基本上都是浏览器不支持的，例如：

- SASS ---> css
- HAML/JSX ---> html
- ES6 ---> ES5 JS

但是，只需要进行一下**预处理**（ＥＳ６编译ＥＳ５，进行ＪＳ代码压缩，文件合并，ＳＡＳＳ语法转ＣＳＳ...）就可以真正运行了。而ｗｅｂｐａｃｋ就是一个预处理工具。用不用预处理步骤，是区分业余开发者和职业开发者明显的特征。



### node 项目

- 初始化node项目 `npm init`,生成 `package.json`
- 安装 webpack，babel 模块
  - npm install webpack --save-dev||-D
  - npm install --save-dev babel-loader babel-core

webpack 使用时，需要增加它的配置文件，在配置文件里，记录webpack各项配置，它的配置文件默认 `webpack.config.js`

```js
var path = require('path');

module.exports = {
    entry: path.resolve(__dirname, 'index.js'),
    output: {
        // path: path.resolve(__dirname, 'build'),
        filename: 'bundle.js'
    },
    module: {
      loaders: [
        {
          test: /\.js$/,
          exclude: /node_modules/,
          loader: "babel-loader"
        }
      ]
    }
};

```
上面的配置文件有三大要素，具体语法不用死记;

- 输入文件　index.js,里面是我们手写的ＥＳ６代码；
- 输出文件bundle.js,里面的代码浏览器是可以原生支持的；
- 制定的编辑器Ｂａｂｅｌ，Ｂａｂｅｌ使用方式是作为一个ｗａｂｐａｃｋ的ｌｏａｄｅｒ



package.json scripts 字段，定义我们的命令

```js
"build": "./node_modules/.bin/webpack -w"
```

配置 babel-loader,添加 .babelrc 文件

> npm install --save-dev babel-preset-latest

```js
{
  "presets": ["latest"]
}
```
